
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>What does it do? &#8212; RDF-i2b2-converter 1 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <p id="verbose">Two modes are available for each converter: <em>verbose</em> and <em>regular</em>. The output of a <em>verbose</em> ontology conversion is compatible with the output of a <em>verbose</em> data conversion, and same for the regular mode.
<strong>IMPORTANT:</strong> There is no point running your data conversion in <em>verbose</em> mode if you don’t have access to the ontology tables in <em>verbose</em> mode as well (<em>CONCEPT_DIMENSION.csv</em> and <em>MODIFIER_DIMENSION.csv</em> are enough)</p>
<div class="section" id="what-does-it-do">
<h1>What does it do?<a class="headerlink" href="#what-does-it-do" title="Permalink to this headline">¶</a></h1>
<p>Background knowledge: i2b2 features a <strong>basecode</strong> that allows to join the ontology concepts (metadata) with the observation records. This basecode is independently but deterministically generated by both the converters (ontology and data). Both basecode sets should match. Mismatches are equivalent to ignored data records (since i2b2 cannot identify the concept).</p>
<ul class="simple">
<li>Generating tables in <em>verbose</em> mode allows you to take a look at the generated code and see if they look legit</li>
<li>Since i2b2 needs capped-length codes to work, we use a recursive hash to generate the production-ready tables.</li>
</ul>
<div class="section" id="setting-up-for-verbose">
<h2>Setting up for verbose<a class="headerlink" href="#setting-up-for-verbose" title="Permalink to this headline">¶</a></h2>
<p>In the Docker setup, the <a class="reference internal" href="docker.html#makefile"><span class="std std-ref">Makefile</span></a> allows you to specify a distinct target directory for verbose and regular modes, and to trigger each mode with a different recipe.
If running from the source files, you should either modify the <em>OUTPUT_TABLES_LOCATION</em> variables to make it point to a directory where you want your verbose tables to be written/read ; you should also manually switch the <em>DEBUG</em> config variable to <strong>“True”</strong> in the <em>i2b2_rdf_config.json</em> file. Then, start the conversion normally (recall the <span class="xref std std-ref">Run instructions</span>).</p>
</div>
<div class="section" id="interpreting-the-results-of-verbose-run">
<h2>Interpreting the results of verbose run<a class="headerlink" href="#interpreting-the-results-of-verbose-run" title="Permalink to this headline">¶</a></h2>
<p>If you configured correctly your I/O and config files, the program (eiher on verbose or regular mode)  will print (last line of execution) one of the following messages:
- <em>Success! All items are consistent with the ontology.</em>
- <a href="#id1"><span class="problematic" id="id2">*</span></a>Some concepts or modifiers are not in the ontology. Please take a look at the “logs_missing_concepts” and “logs_missing_modifiers” logfiles.</p>
<blockquote>
<div>If unreadable, change the “DEBUG” variable in the config files to True, and run the “make verbose” command.*</div></blockquote>
<p>First case, you are good.
Second case, two logfiles were created and you should look into them and try to understand why they do not match ontology items. It could be that the RDF structure is different, or that the data contains codes that are not part of the ontology, etc. Based on this knowledge, you can either correct your data and convert it again (or correct in-place the CSV if the issue is a minor typo), or keep going (but don’t forget all records featuring codes that are in the logfiles will be ignored by the i2b2 query system).</p>
</div>
<div class="section" id="turn-the-verbose-tables-into-production-ready-tables">
<h2>Turn the <em>verbose</em> tables into production-ready tables<a class="headerlink" href="#turn-the-verbose-tables-into-production-ready-tables" title="Permalink to this headline">¶</a></h2>
<p>A bash script will do it for you. After running the data conversion in <em>verbose</em> mode, you will find the script <em>postprod.bash</em> in the same folder where your <em>verbose</em> tables were written. Pass as named argument <em>-outputF</em> the folder in which your production ontology tables are, which is also where the production data tables will be written (optionnally, use the named argument <em>-verboseF</em> to specify the source: default setting is where the script is located.)</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">RDF-i2b2-converter</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022, Jules Fasquelle.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.8</a>
      
      |
      <a href="_sources/debug.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>