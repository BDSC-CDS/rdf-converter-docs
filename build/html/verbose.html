
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Verbose mode explained &#8212; RDF-i2b2-converter 1.0 documentation</title>
    <link rel="stylesheet" href="_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Fast-forward: convert RDF data samples" href="run_data.html" />
    <link rel="prev" title="Organization of the config files" href="configuration.html" /> 
  </head><body>
    <div class="header-wrapper" role="banner">
      <div class="header">
        <div class="headertitle"><a
          href="index.html">RDF-i2b2-converter 1.0 documentation</a></div>
        <div class="rel" role="navigation" aria-label="related navigation">
          <a href="configuration.html" title="Organization of the config files"
             accesskey="P">previous</a> |
          <a href="run_data.html" title="Fast-forward: convert RDF data samples"
             accesskey="N">next</a> |
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="verbose-mode-explained">
<span id="verbose"></span><h1>Verbose mode explained<a class="headerlink" href="#verbose-mode-explained" title="Permalink to this headline">¶</a></h1>
<p>Two modes are available for each converter: <em>verbose</em> and <em>regular</em>. The output of a <em>verbose</em> ontology conversion is compatible with the output of a <em>verbose</em> data conversion, and same for the regular mode.
<strong>IMPORTANT:</strong> There is no point running your data conversion in <em>verbose</em> mode if you don’t have access to the ontology tables in <em>verbose</em> mode as well (<em>CONCEPT_DIMENSION.csv</em> and <em>MODIFIER_DIMENSION.csv</em> are enough)</p>
<p>Background knowledge: i2b2 features a <strong>basecode</strong> that allows to join the ontology concepts (metadata) with the observation records. This basecode is independently but deterministically generated by both the converters (ontology and data). Both basecode sets should match. Mismatches are equivalent to ignored data records (since i2b2 cannot identify the concept).</p>
<ul class="simple">
<li>Generating tables in <em>verbose</em> mode allows you to take a look at the generated code and see if they look legit</li>
<li>Since i2b2 needs capped-length codes to work, we use a recursive hash to generate the production-ready tables.</li>
</ul>
<div class="section" id="setting-up-for-verbose-mode">
<h2>Setting up for verbose mode<a class="headerlink" href="#setting-up-for-verbose-mode" title="Permalink to this headline">¶</a></h2>
<p>In the Docker setup, the <a class="reference internal" href="docker.html#makefile"><span class="std std-ref">Makefile</span></a> allows you to specify a distinct target directory for verbose and regular modes, and to trigger each mode with a different recipe.
If running from the source files, you should either modify the <em>OUTPUT_TABLES_LOCATION</em> variables to make it point to a directory where you want your verbose tables to be written/read ; you should also manually switch the <em>DEBUG</em> config variable to <strong>“True”</strong> in the <em>i2b2_rdf_config.json</em> file. Then, start the conversion normally.</p>
</div>
<div class="section" id="interpreting-the-results-of-verbose-run">
<h2>Interpreting the results of verbose run<a class="headerlink" href="#interpreting-the-results-of-verbose-run" title="Permalink to this headline">¶</a></h2>
<p>If you configured correctly your I/O and config files, the program (either on verbose or regular mode)  will print (last line of execution) one of the following messages:
- <em>Success! All items are consistent with the ontology.</em>
- <em>Some concepts or modifiers are not in the ontology. Please take a look at the “logs_missing_concepts” and “logs_missing_modifiers” logfiles. If unreadable, change the “DEBUG” variable in the config files to True, and run the “make verbose” command.</em></p>
<p>First case, you are good.
Second case, two logfiles were created and you should look into them and try to understand why they do not match ontology items. It could be that the RDF structure is different, or that the data contains codes that are not part of the ontology, etc. Based on this knowledge, you can either correct your data and convert it again (or correct in-place the CSV if the issue is a minor typo), or keep going (but don’t forget all records featuring codes that are in the logfiles will be ignored by the i2b2 query system).</p>
</div>
<div class="section" id="turn-the-verbose-tables-into-production-ready-tables">
<h2>Turn the <em>verbose</em> tables into production-ready tables<a class="headerlink" href="#turn-the-verbose-tables-into-production-ready-tables" title="Permalink to this headline">¶</a></h2>
<p>A bash script will do it for you. After running the data conversion in <em>verbose</em> mode, you will find the script <em>postprod.bash</em> in the same folder where your <em>verbose</em> tables were written. Pass as named argument <em>-outputF</em> the folder in which your production ontology tables are, which is also where the production data tables will be written (optionnally, use the named argument <em>-verboseF</em> to specify the source: default setting is where the script is located.)</p>
</div>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <h3>Table of Contents</h3>
          <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="docker.html">Docker usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation of the RDF-i2b2 converter from Python source files</a></li>
<li class="toctree-l1"><a class="reference internal" href="structure.html">Organization of the input/output files and folders</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Organization of the config files</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Verbose mode explained</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#setting-up-for-verbose-mode">Setting up for verbose mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="#interpreting-the-results-of-verbose-run">Interpreting the results of verbose run</a></li>
<li class="toctree-l2"><a class="reference internal" href="#turn-the-verbose-tables-into-production-ready-tables">Turn the <em>verbose</em> tables into production-ready tables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="run_data.html">Fast-forward: convert RDF data samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="run_ontology.html">Instructions to run the ontology converter</a></li>
</ul>

          <div role="search">
            <h3 style="margin-top: 1.5em;">Search</h3>
            <form class="search" action="search.html" method="get">
                <input type="text" name="q" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
            </form>
          </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <div role="navigation" aria-label="related navigaton">
            <a href="configuration.html" title="Organization of the config files"
              >previous</a> |
            <a href="run_data.html" title="Fast-forward: convert RDF data samples"
              >next</a> |
            <a href="genindex.html" title="General Index"
              >index</a>
          </div>
          <div role="note" aria-label="source link">
              <br/>
              <a href="_sources/verbose.rst.txt"
                rel="nofollow">Show Source</a>
          </div>
        </div>

        <div class="right">
          
    <div class="footer" role="contentinfo">
        &#169; Copyright 2022, Jules Fasquelle.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>